nohup: ignoring input
🔄 启用仅重试模式
📂 将从文件 /home/jiangjp/trace-idea/data/hotpotqa/hotpotqa_test1000_add_truthful_scores_with_kgs6.json 中读取数据，仅处理默认分数为12的项目
开始处理数据集: /home/jiangjp/trace-idea/data/hotpotqa/hotpotqa_test1000_add_truthful_scores_with_kgs6.json
⚠️ 启用仅重试模式：跳过初始处理，直接处理默认分数为12的失败项目

============================================================
直接执行：重试处理默认分数为12的失败项目
============================================================
📊 当前数据集中默认分数统计 - 文本: 2 个, 三元组: 271 个

================================================================================
第 1 轮重试检查和处理
================================================================================
发现默认分数 - 文本: 2 个, 三元组: 271 个
当前配置 - 并发数: 3000, 文本批次: 1, 三元组批次: 1

开始处理 2 个失败的文本...
使用配置处理文本 - 并发数: 3000, 批次大小: 1
警告：期望 1 个分数，但只找到 0 个，开始重试...
第 1 次重试API调用...
警告：期望 1 个分数，但只找到 0 个，开始重试...
第 1 次重试API调用...
重试第 1 次的响应：
重试第 1 次仍然不匹配：期望 1 个，得到 0 个
第 2 次重试API调用...
重试第 2 次的响应：
重试成功！提取到 1 个分数
文本批量评估进度: 1/2 (批次 1, 1 个ctx) - 处理了 1 个文本
重试第 1 次的响应：
重试第 1 次仍然不匹配：期望 1 个，得到 0 个
第 2 次重试API调用...
重试第 2 次的响应：
重试第 2 次仍然不匹配：期望 1 个，得到 0 个
第 3 次重试API调用...
重试第 3 次的响应：
重试成功！提取到 1 个分数
文本批量评估进度: 2/2 (批次 2, 1 个ctx) - 处理了 1 个文本
失败文本重处理完成: 2/2 成功

开始处理 26 个包含失败三元组的ctx...
使用配置处理三元组 - 并发数: 3000, 批次大小: 1
警告：期望 10 个分数，但只找到 0 个，开始重试...
第 1 次重试API调用...
重试第 1 次的响应：
重试第 1 次仍然不匹配：期望 10 个，得到 0 个
第 2 次重试API调用...
警告：期望 5 个分数，但只找到 1 个，开始重试...
第 1 次重试API调用...
重试第 2 次的响应：
重试第 2 次仍然不匹配：期望 10 个，得到 0 个
第 3 次重试API调用...
警告：期望 7 个分数，但只找到 3 个，开始重试...
第 1 次重试API调用...
重试第 1 次的响应：
重试第 1 次仍然不匹配：期望 5 个，得到 0 个
第 2 次重试API调用...
警告：期望 8 个分数，但只找到 3 个，开始重试...
第 1 次重试API调用...
重试第 3 次的响应：警告：期望 43 个分数，但只找到 1 个，开始重试...
重试第 3 次仍然不匹配：期望 10 个，得到 0 个
第 1 次重试API调用...

所有重试都失败，使用默认分数 12
三元组批量评估进度: 1/26 (批次 21, 1 个ctx) - 处理了 10 个三元组
成功提取到 3 个分数
三元组批量评估进度: 2/26 (批次 12, 1 个ctx) - 处理了 3 个三元组
成功提取到 4 个分数
三元组批量评估进度: 3/26 (批次 22, 1 个ctx) - 处理了 4 个三元组
成功提取到 5 个分数
三元组批量评估进度: 4/26 (批次 13, 1 个ctx) - 处理了 5 个三元组
成功提取到 4 个分数
三元组批量评估进度: 5/26 (批次 10, 1 个ctx) - 处理了 4 个三元组
警告：期望 6 个分数，但只找到 4 个，开始重试...
第 1 次重试API调用...重试第 2 次的响应：

重试第 2 次仍然不匹配：期望 5 个，得到 1 个
第 3 次重试API调用...
重试第 1 次的响应：
重试第 1 次仍然不匹配：期望 7 个，得到 3 个
第 2 次重试API调用...
重试第 1 次的响应：
成功提取到 6 个分数重试第 1 次仍然不匹配：期望 8 个，得到 3 个

三元组批量评估进度: 6/26 (批次 9, 1 个ctx) - 处理了 6 个三元组第 2 次重试API调用...
警告：期望 9 个分数，但只找到 6 个，开始重试...
第 1 次重试API调用...

警告：期望 10 个分数，但只找到 8 个，开始重试...
第 1 次重试API调用...
成功提取到 8 个分数
三元组批量评估进度: 7/26 (批次 26, 1 个ctx) - 处理了 8 个三元组
成功提取到 4 个分数
三元组批量评估进度: 8/26 (批次 17, 1 个ctx) - 处理了 4 个三元组
成功提取到 6 个分数
三元组批量评估进度: 9/26 (批次 5, 1 个ctx) - 处理了 6 个三元组
成功提取到 9 个分数
三元组批量评估进度: 10/26 (批次 8, 1 个ctx) - 处理了 9 个三元组
重试第 3 次的响应：
重试第 3 次仍然不匹配：期望 5 个，得到 1 个
所有重试都失败，使用默认分数 12
三元组批量评估进度: 11/26 (批次 18, 1 个ctx) - 处理了 5 个三元组
成功提取到 6 个分数
三元组批量评估进度: 12/26 (批次 3, 1 个ctx) - 处理了 6 个三元组
重试第 1 次的响应：警告：期望 25 个分数，但只找到 10 个，开始重试...成功提取到 7 个分数
重试第 2 次的响应：三元组批量评估进度: 13/26 (批次 16, 1 个ctx) - 处理了 7 个三元组

重试第 1 次仍然不匹配：期望 43 个，得到 6 个

重试第 2 次仍然不匹配：期望 7 个，得到 3 个
第 3 次重试API调用...

第 1 次重试API调用...
第 2 次重试API调用...
重试第 2 次的响应：
重试第 2 次仍然不匹配：期望 8 个，得到 3 个
第 3 次重试API调用...
警告：期望 13 个分数，但只找到 12 个，开始重试...
第 1 次重试API调用...
成功提取到 14 个分数
三元组批量评估进度: 14/26 (批次 24, 1 个ctx) - 处理了 14 个三元组
成功提取到 15 个分数
三元组批量评估进度: 15/26 (批次 19, 1 个ctx) - 处理了 15 个三元组
警告：期望 12 个分数，但只找到 11 个，开始重试...
第 1 次重试API调用...
重试第 1 次的响应：
重试第 1 次仍然不匹配：期望 6 个，得到 4 个
第 2 次重试API调用...
重试第 1 次的响应：
重试第 1 次仍然不匹配：期望 9 个，得到 6 个
第 2 次重试API调用...
警告：期望 19 个分数，但只找到 16 个，开始重试...
第 1 次重试API调用...
重试第 3 次的响应：
重试第 3 次仍然不匹配：期望 7 个，得到 3 个
所有重试都失败，使用默认分数 12
三元组批量评估进度: 16/26 (批次 6, 1 个ctx) - 处理了 7 个三元组
重试第 2 次的响应：
重试第 2 次仍然不匹配：期望 43 个，得到 2 个
第 3 次重试API调用...
重试第 3 次的响应：
重试第 3 次仍然不匹配：期望 8 个，得到 3 个
所有重试都失败，使用默认分数 12
三元组批量评估进度: 17/26 (批次 11, 1 个ctx) - 处理了 8 个三元组
成功提取到 13 个分数
三元组批量评估进度: 18/26 (批次 1, 1 个ctx) - 处理了 13 个三元组
重试第 1 次的响应：
重试第 1 次仍然不匹配：期望 10 个，得到 8 个
第 2 次重试API调用...
重试第 2 次的响应：
重试第 2 次仍然不匹配：期望 9 个，得到 6 个
第 3 次重试API调用...
重试第 2 次的响应：
重试第 2 次仍然不匹配：期望 6 个，得到 4 个
第 3 次重试API调用...
重试第 3 次的响应：
重试第 3 次仍然不匹配：期望 43 个，得到 7 个
所有重试都失败，使用默认分数 12
三元组批量评估进度: 19/26 (批次 4, 1 个ctx) - 处理了 43 个三元组
重试第 1 次的响应：
重试第 1 次仍然不匹配：期望 12 个，得到 11 个
第 2 次重试API调用...
重试第 1 次的响应：
重试第 1 次仍然不匹配：期望 19 个，得到 12 个
第 2 次重试API调用...
重试第 1 次的响应：
重试第 1 次仍然不匹配：期望 13 个，得到 12 个
第 2 次重试API调用...
重试第 3 次的响应：
重试第 3 次仍然不匹配：期望 6 个，得到 4 个
所有重试都失败，使用默认分数 12
三元组批量评估进度: 20/26 (批次 14, 1 个ctx) - 处理了 6 个三元组
重试第 3 次的响应：
重试第 3 次仍然不匹配：期望 9 个，得到 6 个
所有重试都失败，使用默认分数 12
三元组批量评估进度: 21/26 (批次 7, 1 个ctx) - 处理了 9 个三元组
重试第 2 次的响应：
重试第 2 次仍然不匹配：期望 10 个，得到 8 个
第 3 次重试API调用...
重试第 1 次的响应：
重试第 1 次仍然不匹配：期望 25 个，得到 12 个
第 2 次重试API调用...
重试第 2 次的响应：
重试第 2 次仍然不匹配：期望 25 个，得到 1 个
第 3 次重试API调用...
重试第 3 次的响应：
重试第 3 次仍然不匹配：期望 10 个，得到 8 个
所有重试都失败，使用默认分数 12
三元组批量评估进度: 22/26 (批次 20, 1 个ctx) - 处理了 10 个三元组
重试第 2 次的响应：
重试第 2 次仍然不匹配：期望 12 个，得到 11 个
第 3 次重试API调用...
重试第 2 次的响应：
重试第 2 次仍然不匹配：期望 13 个，得到 12 个
第 3 次重试API调用...
重试第 3 次的响应：
重试第 3 次仍然不匹配：期望 25 个，得到 3 个
所有重试都失败，使用默认分数 12
三元组批量评估进度: 23/26 (批次 25, 1 个ctx) - 处理了 25 个三元组
重试第 2 次的响应：
重试第 2 次仍然不匹配：期望 19 个，得到 20 个
第 3 次重试API调用...
重试第 3 次的响应：
重试第 3 次仍然不匹配：期望 12 个，得到 11 个
所有重试都失败，使用默认分数 12
三元组批量评估进度: 24/26 (批次 15, 1 个ctx) - 处理了 12 个三元组
重试第 3 次的响应：
重试第 3 次仍然不匹配：期望 13 个，得到 12 个
所有重试都失败，使用默认分数 12
三元组批量评估进度: 25/26 (批次 23, 1 个ctx) - 处理了 13 个三元组
重试第 3 次的响应：
重试第 3 次仍然不匹配：期望 19 个，得到 20 个
所有重试都失败，使用默认分数 12
三元组批量评估进度: 26/26 (批次 2, 1 个ctx) - 处理了 19 个三元组
失败三元组重处理完成: 26/26 成功
retry_round_1阶段进度已保存到临时文件: /home/jiangjp/trace-idea/data/hotpotqa/hotpotqa_test1000_add_truthful_scores_with_kgs7.json.retry_round_1.tmp
本轮处理后 - 文本默认分数: 0 个, 三元组默认分数: 167 个
配置调整: 并发数 3000->2999, 文本批次 1->1, 三元组批次 1->1
调整后配置 - 并发数: 2999, 文本批次: 1, 三元组批次: 1
⚠️ 已达到最大重试轮次，停止重试

============================================================
第四阶段：处理缺失分数字段的项目
============================================================
📊 当前数据集中缺失分数字段统计 - 文本: 0 个, 三元组: 0 个
✅ 数据集中没有缺失分数字段的项目，无需处理
✅ 最终处理完成！结果已保存到: /home/jiangjp/trace-idea/data/hotpotqa/hotpotqa_test1000_add_truthful_scores_with_kgs7.json
🏁 最终统计:
   - 剩余默认分数: 文本 0 个, 三元组 167 个
   - 剩余缺失分数字段: 文本 0 个, 三元组 0 个
